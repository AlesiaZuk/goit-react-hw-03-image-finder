(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={modal_backdrop:"Modal_modal_backdrop__1_PpA",modal_content:"Modal_modal_content__3AqKM",button:"Modal_button__3RhxT"}},12:function(e,t,a){e.exports={search_form:"Searchbar_search_form__3sOcS",search_button:"Searchbar_search_button__-7Fn-",search:"Searchbar_search__2Bg9L",search_container:"Searchbar_search_container__tbHVG"}},15:function(e,t,a){e.exports={button:"Button_button__3VHhh",buttonIsHidden:"Button_buttonIsHidden__1W_CF"}},20:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(8),o=a.n(c),l=(a(20),a(21),a(3)),s=a(4),i=a(6),h=a(5),u=a(12),d=a.n(u),g=a(0),m=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.handleSubmit=function(t){var a=e.state.searchQuery;t.preventDefault(),e.props.onSubmit(a),e.setState({searchQuery:""})},e.handelChange=function(t){e.setState({searchQuery:t.target.value.toLowerCase()})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Search images"}),Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("label",{children:Object(g.jsx)("input",{type:"text",value:e,onChange:this.handelChange,className:d.a.search_form,placeholder:"Search images...",required:!0})}),Object(g.jsx)("button",{type:"submit",className:d.a.search_button,children:"Search"})]})]})}}]),a}(n.Component),b=m,j=a(13);var p=function(e,t){return fetch("".concat("https://pixabay.com/api","/?image_type=photo&orientation=horizontal&q=").concat(e,"&page=").concat(t,"&per_page=").concat(12,"&key=").concat("23521874-546d3070950852676c2506258")).then((function(e){return e.json()}))},_=a(14),y=a.n(_);var f=function(){return Object(g.jsx)(y.a,{type:"Circles",color:"#b89393",height:100,width:100,timeout:3e3})},O=a(9),v=a.n(O),x=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var a=e.props,n=a.toggleModal,r=a.onImgClick;if(t.preventDefault(),"IMG"===t.target.nodeName){var c={};c.largeImageURL=t.target.dataset.source,c.alt=t.target.alt,n(),r(c)}},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return this.props.img.map((function(t){return Object(g.jsx)("li",{className:v.a.gallery_item,children:Object(g.jsx)("div",{children:Object(g.jsx)("a",{href:t.largeImageURL,className:v.a.gallery_link,onClick:e.handleClick,children:Object(g.jsx)("img",{src:t.webformatURL,alt:t.tags,width:"370px",height:"250px",className:v.a.gallery_image,"data-source":t.largeImageURL})})})},t.id)}))}}]),a}(n.Component),k=x,w=a(15),C=a.n(w);var S=function(e){var t=e.handelClick;return Object(g.jsx)("button",{type:"button",onClick:t,className:C.a.button,children:"Load more..."})},I=a(7),M=a.n(I),N="idle",L="pending",B="resolved",Q="rejected",R=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={img:[],page:2,error:null,showButton:!1,status:N},e.handelClick=function(){e.pageIncrement()},e.fetchGallery=function(t,a){p(t,a).then((function(a){a.hits.length>0?(e.setState({img:[].concat(Object(j.a)(e.state.img),Object(j.a)(a.hits.map((function(e){var t={};return t.id=e.id,t.largeImageURL=e.largeImageURL,t.webformatURL=e.webformatURL,t.tags=e.tags,t})))),status:B}),e.showLoaderButton(a)):e.setState({error:"No image with keyword ".concat(t),status:Q})}))},e.showLoaderButton=function(t){t.totalHits>12&&12===t.hits.length?e.showButton(!0):e.showButton(!1)},e.showButton=function(t){e.setState({showButton:t})},e.pageIncrement=function(){var t=e.state.page;e.setState({page:t+1})},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.page,n=e.searchQuery,r=this.props.searchQuery;n!==r&&this.setState({img:[],page:2,status:L}),n===r&&t.page===a||this.fetchGallery(r,a)}},{key:"render",value:function(){var e=this.props,t=e.toggleModal,a=e.onImgClick,n=this.state,r=n.img,c=n.error,o=n.status,l=n.showButton;return"idle"===o?Object(g.jsx)("h2",{className:M.a.gallery_title,children:"Enter a keyword..."}):"pending"===o?Object(g.jsxs)("div",{className:M.a.gallery_container,children:[Object(g.jsx)(f,{}),";"]}):"rejected"===o?Object(g.jsx)("h2",{className:M.a.gallery_title,children:c}):"resolved"===o?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("section",{children:Object(g.jsx)("ul",{className:M.a.gallery_list,children:Object(g.jsx)(k,{img:r,toggleModal:t,onImgClick:a})})}),l&&Object(g.jsx)("div",{className:M.a.button_container,children:Object(g.jsx)(S,{handelClick:this.handelClick})})]}):void 0}}]),a}(n.Component),U=R,G=a(10),A=a.n(G),D=document.querySelector("#modal-root"),F=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(g.jsxs)("div",{className:A.a.modal_backdrop,onClick:this.handleBackdropClick,children:[Object(g.jsx)("button",{type:"button",onClick:this.props.onClose,className:A.a.button,children:"X"}),Object(g.jsx)("div",{className:A.a.modal_content,children:this.props.children})]}),D)}}]),a}(n.Component),E=F,H=["container"],q=["search"],K=["search_container"],T=["image"],W=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:"",imgModal:"",showModal:!1},e.FormSubmit=function(t){e.setState({searchQuery:t})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.ImgClick=function(t){e.setState({imgModal:t})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.searchQuery,a=e.imgModal,n=e.showModal;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("main",{children:Object(g.jsxs)("div",{className:H,children:[Object(g.jsx)("section",{className:q,children:Object(g.jsx)("div",{className:K,children:Object(g.jsx)(b,{onSubmit:this.FormSubmit})})}),Object(g.jsx)(U,{searchQuery:t,toggleModal:this.toggleModal,onImgClick:this.ImgClick})]})}),n&&Object(g.jsx)(E,{onClose:this.toggleModal,children:Object(g.jsx)("img",{src:a.largeImageURL,alt:a.alt,className:T})})]})}}]),a}(n.Component),z=W;o.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(z,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={gallery_title:"ImageGallery_gallery_title__3dzRl",gallery_list:"ImageGallery_gallery_list__1U-4h",gallery_container:"ImageGallery_gallery_container__2TQ2R",button_container:"ImageGallery_button_container__2Y93-"}},9:function(e,t,a){e.exports={gallery_item:"ImageGalleryItem_gallery_item__2N9jC",gallery_image:"ImageGalleryItem_gallery_image__3SluW"}}},[[43,1,2]]]);
//# sourceMappingURL=main.2d759d26.chunk.js.map