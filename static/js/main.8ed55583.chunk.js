(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={gallery_item:"ImageGalleryItem_gallery_item__2N9jC",gallery_image:"ImageGalleryItem_gallery_image__3SluW"}},12:function(e,t,a){e.exports={search_form:"Searchbar_search_form__3sOcS",search_button:"Searchbar_search_button__-7Fn-",search:"Searchbar_search__2Bg9L",search_container:"Searchbar_search_container__tbHVG"}},13:function(e,t,a){e.exports={modal_backdrop:"Modal_modal_backdrop__1_PpA",modal_content:"Modal_modal_content__3AqKM"}},15:function(e,t,a){e.exports={button:"Button_button__3VHhh",buttonIsHidden:"Button_buttonIsHidden__1W_CF"}},20:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(9),o=a.n(c),s=(a(20),a(21),a(3)),i=a(4),l=a(6),h=a(5),u=a(12),g=a.n(u),m=a(0),d=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.handleSubmit=function(t){var a=e.state.searchQuery;t.preventDefault(),e.props.onSubmit(a),e.setState({searchQuery:""})},e.handelChange=function(t){e.setState({searchQuery:t.target.value.toLowerCase()})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"Search images"}),Object(m.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(m.jsx)("label",{children:Object(m.jsx)("input",{type:"text",value:e,onChange:this.handelChange,className:g.a.search_form,placeholder:"Search images...",required:!0})}),Object(m.jsx)("button",{type:"submit",className:g.a.search_button,children:"Search"})]})]})}}]),a}(n.Component),b=d,j=a(7);var p=function(e,t){return fetch("".concat("https://pixabay.com/api","/?image_type=photo&orientation=horizontal&q=").concat(e,"&page=").concat(t,"&per_page=").concat(12,"&key=").concat("23521874-546d3070950852676c2506258")).then((function(e){return e.json()}))},y=a(14),_=a.n(y);var f=function(){return Object(m.jsx)(_.a,{type:"Circles",color:"#b89393",height:100,width:100,timeout:3e3})},O=a(10),v=a.n(O),w=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var a=e.props,n=a.toggleModal,r=a.onImgClick;if(t.preventDefault(),"IMG"===t.target.nodeName){var c={};c.largeImageURL=t.target.dataset.source,c.alt=t.target.alt,n(),r(c)}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.props.img.map((function(t){return Object(m.jsx)("li",{className:v.a.gallery_item,children:Object(m.jsx)("div",{children:Object(m.jsx)("a",{href:t.largeImageURL,className:v.a.gallery_link,onClick:e.handleClick,children:Object(m.jsx)("img",{src:t.webformatURL,alt:t.tags,width:"370px",height:"250px",className:v.a.gallery_image,"data-source":t.largeImageURL})})})},t.id)}))}}]),a}(n.Component),x=w,k=a(8),C=a.n(k),S="idle",I="pending",L="resolved",M="rejected",N=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={img:[],page:1,error:null,status:S},e.stateImgChange=function(t){e.setState({img:[].concat(Object(j.a)(e.state.img),Object(j.a)(t))})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this,a=e.searchQuery,n=this.props.searchQuery,r=e.newImgArray,c=this.props.newImgArray;a!==n&&(this.setState({status:I}),p(n,this.state.page).then((function(e){e.hits.length>0?(t.setState({img:Object(j.a)(e.hits.map((function(e){var t={};return t.id=e.id,t.largeImageURL=e.largeImageURL,t.webformatURL=e.webformatURL,t.tags=e.tags,t}))),status:L}),e.totalHits>12&&12===e.hits.length?t.props.showButton(!0):t.props.showButton(!1)):(t.props.showButton(!1),t.setState({error:"No image with keyword ".concat(n),status:M}))}))),r!==c&&(this.setState({img:[].concat(Object(j.a)(this.state.img),Object(j.a)(c))}),console.log("this.state.img \u043f\u043e\u0441\u043b\u0435",this.state.img))}},{key:"render",value:function(){var e=this.props,t=e.toggleModal,a=e.onImgClick,n=this.state,r=n.img,c=n.error,o=n.status;return"idle"===o?Object(m.jsx)("h2",{className:C.a.gallery_title,children:"Enter a keyword..."}):"pending"===o?Object(m.jsxs)("div",{className:C.a.gallery_container,children:[Object(m.jsx)(f,{}),";"]}):"rejected"===o?Object(m.jsx)("h2",{className:C.a.gallery_title,children:c}):"resolved"===o?(console.log(this.state.img),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("ul",{className:C.a.gallery_list,children:Object(m.jsx)(x,{img:r,toggleModal:t,onImgClick:a})})})):void 0}}]),a}(n.Component),U=N,B=a(15),R=a.n(B),Q=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={img:[],page:2},e.handelClick=function(){var t=e.props,a=t.searchQuery,n=t.imgLoader,r=e.state,c=r.page,o=r.img;e.setState({page:c+1}),console.log(c),p(a,c).then((function(t){console.log(c),t.hits.length>0&&(e.setState({img:Object(j.a)(t.hits.map((function(e){var t={};return t.id=e.id,t.largeImageURL=e.largeImageURL,t.webformatURL=e.webformatURL,t.tags=e.tags,t})))}),n(o),console.log(e.state.img))}))},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(m.jsx)("button",{type:"button",onClick:this.handelClick,className:R.a.button,children:"Load more..."})}}]),a}(n.Component),A=Q,D=a(13),F=a.n(D),G=document.querySelector("#modal-root"),E=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(m.jsx)("div",{className:F.a.modal_backdrop,onClick:this.handleBackdropClick,children:Object(m.jsx)("div",{className:F.a.modal_content,children:this.props.children})}),G)}}]),a}(n.Component),H=E,q=["container"],K=["search"],W=["search_container"],z=["image"],J=["button"],P=["button-container"],T=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:"",imgModal:"",img:[],showModal:!1,showButton:!1},e.FormSubmit=function(t){e.setState({searchQuery:t})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.ImgClick=function(t){e.setState({imgModal:t})},e.showButton=function(t){e.setState({showButton:t})},e.imgLoader=function(t){e.setState({img:t})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.searchQuery,a=e.imgModal,n=e.showButton,r=e.showModal,c=e.img;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("main",{children:Object(m.jsxs)("div",{className:q,children:[Object(m.jsx)("section",{className:K,children:Object(m.jsx)("div",{className:W,children:Object(m.jsx)(b,{onSubmit:this.FormSubmit})})}),Object(m.jsx)("section",{children:Object(m.jsx)(U,{searchQuery:t,showButton:this.showButton,toggleModal:this.toggleModal,onImgClick:this.ImgClick,newImgArray:c})}),n&&Object(m.jsx)("div",{className:P,children:Object(m.jsx)(A,{searchQuery:t,imgLoader:this.imgLoader})})]})}),r&&Object(m.jsxs)(H,{onClose:this.toggleModal,children:[Object(m.jsx)("button",{type:"button",onClick:this.toggleModal,className:J,children:"X"}),Object(m.jsx)("img",{src:a.largeImageURL,alt:a.alt,className:z})]})]})}}]),a}(n.Component),V=T;o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(V,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={gallery_title:"ImageGallery_gallery_title__3dzRl",gallery_list:"ImageGallery_gallery_list__1U-4h",gallery_container:"ImageGallery_gallery_container__2TQ2R"}}},[[43,1,2]]]);
//# sourceMappingURL=main.8ed55583.chunk.js.map